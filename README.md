# Active-Directory-Exploitation
Exploiting a vulnerable Active Directory


<h1>Active-Directory-Exploitation</h1>

<img src="https://imgur.com/gNsLJTR.png" height="80%" width="80%" alt="diagram"/>



<h2>Description</h2>
In the Simulation below, We will : <br>
    <b> 1. Enumerate a domain’s users using Kerbrute</b><br>
    <b> 2. Exploit Kerberos misconfigurations using Impacket</b><br>
    <b> 3. Crack hashes using hashcat</b><br>
    <b> 4. Perform further enumeration after gaining an initial access to the target system using smbclient</b><br>
    <b> 5. Elevate our privileges within the Domain</b><br>

    
<br />


<h2>Languages and Utilities Used</h2>

- <b>Impacket</b> 
- <b>BloodHound</b>

<h2>Environments Used </h2>

- <b>Kali </b>
- <b>Windows Host PC</b>

<h2>Program walk-through:</h2>

<p align="center">
Here is the exploit walkthroughs: We start with a basic enumeration command. <br/>

<img src="https://imgur.com/uSmQQ23.png" height="80%" width="80%" alt="diagram"/>
<br />
<img src="https://imgur.com/vdnjpAV.png" height="80%" width="80%" alt="diagram"/>
<br /><br />

1. Let The enumeration begin: <br/>
<img src="https://imgur.com/rOkrguc.png" height="80%" width="80%" alt="set up"/>
<br />
<br />


2. Let’s first add the DNS domain name along with the machine IP to /etc/hosts inside of our attacker machine using Kerberos: <br/>
<img src="https://imgur.com/J7UC0Vb.png" height="80%" width="80%" alt="set up"/>
<br />
<br />


3. The first tool we shall use would be Kerbrute. Syntax: kerbrute userenum -d DOMAIN_NAME --dc DOMAIN_CONTROLLER_IP user_wordlists.txt <br/>
<img src="https://imgur.com/Jt21u3R.png" height="80%" width="80%" alt="set up"/>
<br />
<br />

4. After the enumeration of user accounts is finished, we can attempt to abuse a feature within Kerberos with an attack method called ASREPRoasting. ASReproasting occurs when a user account has the privilege “Does not require Pre-Authentication” set. Impacket has a tool called “GetNPUsers.py” that will allow us to query ASReproastable accounts from the Key Distribution Center (KDC). The only thing that’s necessary to query accounts is a valid set of usernames which we enumerated previously via Kerbrute.  <br/>
<img src="https://imgur.com/INt2JhR.png" height="80%" width="80%" alt="set up"/>
<br />
<br />

5. Usernames have been successfully extracted :   <br/>
<img src="https://imgur.com/UyEMpW3.png" height="80%" width="80%" alt="set up"/>
<br />
<br />

6. We query ASReproastable accounts from the Key Distribution Center (KDC) uisng Impacket’s GetNPUsers tool <br/>
<img src="https://imgur.com/GXFNkaW.png" height="80%" width="80%" alt="set up"/>
<br />
<br />

7. We got one account (svc-admin) that is ASReproastable. Let’s now try to crack the service account’s hash in order to retrieve its password. Now that we have an idea about the hash type we can try to crack it using hashcat as follows <br/>
<img src="https://imgur.com/GlVEL2a.png" height="80%" width="80%" alt="set up"/>
<img src="https://imgur.com/IEQipd6.png" height="80%" width="80%" alt="set up"/>
<img src="https://imgur.com/7AL6gBe.png" height="80%" width="80%" alt="set up"/>

<br />
<br />

8. Need for More Basic Enumeration <br/>
<img src="https://imgur.com/PIFjG3j.png" height="80%" width="80%" alt="set up"/>
<img src="https://imgur.com/IiY6W65.png" height="80%" width="80%" alt="set up"/>
<img src="https://imgur.com/eBnxPws.png" height="80%" width="80%" alt="set up"/>
<br />
<br />

9. We query ASReproastable accounts from the Key Distribution Center (KDC) uisng Impacket’s GetNPUsers tool  <br/>
<img src="https://imgur.com/GXFNkaW.png" height="80%" width="80%" alt="set up"/>
<br />
<br />

6. We query ASReproastable accounts from the Key Distribution Center (KDC) uisng Impacket’s GetNPUsers tool  <br/>
<img src="https://imgur.com/GXFNkaW.png" height="80%" width="80%" alt="set up"/>
<br />
<br />





<br />
This Concludes This Active Directory Exploit Project!
NOTE: You can add onto this and make it more complex, or use these methonds to automate other tasks!  <br/>
<br />
</p>

<!--
 ```diff
- text in red
+ text in green
! text in orange
# text in gray
@@ text in purple (and bold)@@
```
--!>
